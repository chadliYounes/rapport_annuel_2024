!function(e){"use strict";var t=null;!function r(e,n,a){function o(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var r=e[s][1][t];return o(r?r:t)},p,p.exports,r,e,n,a)}return n[s].exports}for(var i="function"==typeof t&&t,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(e,t,r){(function(n,a){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.ES6Promise=n()}(this,function(){function t(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function r(e){return"function"==typeof e}function o(e){J=e}function i(e){Z=e}function s(){return function(){return n.nextTick(h)}}function u(){return"undefined"!=typeof Y?function(){Y(h)}:p()}function l(){var e=0,t=new Q(h),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function p(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<q;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}q=0}function d(){try{var t=e,r=t("vertx");return Y=r.runOnLoop||r.runOnContext,u()}catch(n){return p()}}function f(e,t){var r=arguments,n=this,a=new this.constructor(v);void 0===a[ae]&&I(a);var o=n._state;return o?!function(){var e=r[o-1];Z(function(){return j(o,a,e,n._result)})}():_(n,a,e,t),a}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return S(r,e),r}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ue.error=t,ue}}function w(e,t,r,n){try{e.call(t,r,n)}catch(a){return a}}function P(e,t,r){Z(function(e){var n=!1,a=w(r,t,function(r){n||(n=!0,t!==r?S(e,r):E(e,r))},function(t){n||(n=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&a&&(n=!0,C(e,a))},e)}function M(e,t){t._state===ie?E(e,t._result):t._state===se?C(e,t._result):_(t,void 0,function(t){return S(e,t)},function(t){return C(e,t)})}function A(e,t,n){t.constructor===e.constructor&&n===f&&t.constructor.resolve===m?M(e,t):n===ue?(C(e,ue.error),ue.error=null):void 0===n?E(e,t):r(n)?P(e,t,n):E(e,t)}function S(e,r){e===r?C(e,g()):t(r)?A(e,r,b(r)):E(e,r)}function x(e){e._onerror&&e._onerror(e._result),O(e)}function E(e,t){e._state===oe&&(e._result=t,e._state=ie,0!==e._subscribers.length&&Z(O,e))}function C(e,t){e._state===oe&&(e._state=se,e._result=t,Z(x,e))}function _(e,t,r,n){var a=e._subscribers,o=a.length;e._onerror=null,a[o]=t,a[o+ie]=r,a[o+se]=n,0===o&&e._state&&Z(O,e)}function O(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,a=void 0,o=e._result,i=0;i<t.length;i+=3)n=t[i],a=t[i+r],n?j(r,n,a,o):a(o);e._subscribers.length=0}}function T(){this.error=null}function R(e,t){try{return e(t)}catch(r){return le.error=r,le}}function j(e,t,n,a){var o=r(n),i=void 0,s=void 0,u=void 0,l=void 0;if(o){if(i=R(n,a),i===le?(l=!0,s=i.error,i.error=null):u=!0,t===i)return void C(t,y())}else i=a,u=!0;t._state!==oe||(o&&u?S(t,i):l?C(t,s):e===ie?E(t,i):e===se&&C(t,i))}function k(e,t){try{t(function(t){S(e,t)},function(t){C(e,t)})}catch(r){C(e,r)}}function N(){return ce++}function I(e){e[ae]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ae]||I(this.promise),X(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&E(this.promise,this._result))):C(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function V(e){return new L(this,e).promise}function U(e){var t=this;return new t(X(e)?function(r,n){for(var a=e.length,o=0;o<a;o++)t.resolve(e[o]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function B(e){var t=this,r=new t(v);return C(r,e),r}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[ae]=N(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&H(),this instanceof G?k(this,e):D())}function z(){var e=void 0;if("undefined"!=typeof a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}e.Promise=G}var W=void 0;W=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var X=W,q=0,Y=void 0,J=void 0,Z=function(e,t){re[q]=e,re[q+1]=t,q+=2,2===q&&(J?J(h):ne())},$="undefined"!=typeof window?window:void 0,K=$||{},Q=K.MutationObserver||K.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?s():Q?l():te?c():void 0===$&&"function"==typeof e?d():p();var ae=Math.random().toString(36).substring(16),oe=void 0,ie=1,se=2,ue=new T,le=new T,ce=0;return L.prototype._enumerate=function(e){for(var t=0;this._state===oe&&t<e.length;t++)this._eachEntry(e[t],t)},L.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===m){var a=b(e);if(a===f&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(r===G){var o=new r(v);A(o,e,a),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},L.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===oe&&(this._remaining--,e===se?C(n,r):this._result[t]=r),0===this._remaining&&E(n,this._result)},L.prototype._willSettleAt=function(e,t){var r=this;_(e,void 0,function(e){return r._settledAt(ie,t,e)},function(e){return r._settledAt(se,t,e)})},G.all=V,G.race=U,G.resolve=m,G.reject=B,G._setScheduler=o,G._setAsap=i,G._asap=Z,G.prototype={constructor:G,then:f,"catch":function(e){return this.then(null,e)}},G.polyfill=z,G.Promise=G,G})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){v&&f&&(v=!1,f.length?m=f.concat(m):g=-1,m.length&&u())}function u(){if(!v){var e=o(s);v=!0;for(var t=m.length;t;){for(f=m,m=[];++g<t;)f&&f[g].run();g=-1,t=m.length}f=null,v=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var p,h,d=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{h="function"==typeof clearTimeout?clearTimeout:a}catch(e){h=a}}();var f,m=[],v=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new l(e,t)),1!==m.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],3:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./modulesManager/ModulesManager"),a=function(){function e(){this.moduleManager=new n["default"],this.moduleManager.init()}return e}();r.Main=a},{"./modulesManager/ModulesManager":8}],4:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/ApiEvents"),a=function(){function e(){this.routersMatch=[],this.hashParams=[],this.hashChange=this.hashChange.bind(this),this.close=this.close.bind(this),window.addEventListener("hashchange",this.hashChange,!0),this.hashChange()}return e.prototype.hashChange=function(e){var t=window.location.hash.replace(/^\#/,"");this.hashParams=t.split("&"),this.checkUpdates()},e.prototype.checkUpdates=function(){for(var e=0,t=this.routersMatch.length;e<t;e++)this.routersMatch[e].checkUpdateAsync(this.hashParams)},e.prototype.close=function(e){this.routersMatch.filter(function(t){return t!==e})},e.prototype.goTo=function(e,t){var r=new RegExp(e,"g");t&&""!==t.trim()||(r=new RegExp("\\&"+e+"|"+e,"g"),t=""),window.location.hash=window.location.hash.replace(r,t)},e.prototype.match=function(e){var t=new o(this.close,e);return this.routersMatch.push(t),t.init(this.hashParams)},e}(),o=function(){function e(e,t){this.closeFromManager=e,this.toMatch=t,this.removableListeners=[],this.lastMatched=null,this._to=this._to.bind(this),this._update=this._update.bind(this),this._leave=this._leave.bind(this),this.close=this.close.bind(this),this.apiEvents=new n.ApiEvents}return e.prototype.init=function(e){return this.checkUpdateAsync(e),this.getToNLeave()},e.prototype.checkUpdateAsync=function(e){var t=this;setTimeout(function(){return t.checkUpdate(e)},0)},e.prototype.checkUpdate=function(e){var t=new RegExp(this.toMatch,"g"),r=null,n=null;if(e.forEach(function(e){var a=e.match(t);r=null===a?null:a[0],n=n||r}),null!==n||null!==this.lastMatched){if(null===n)return this.lastMatched=null,void this.apiEvents.fire({type:"leave",data:{}});if(n!==this.lastMatched){if(null===this.lastMatched)return this.lastMatched=n,void this.apiEvents.fire({type:"to",data:{}});this.lastMatched=n,this.apiEvents.fire({type:"update",data:{}})}}},e.prototype._to=function(e){var t=this;return this.apiEvents.addListener("to",e),this.removableListeners.push(function(){t.apiEvents.removeListener("to",e)}),this.getToNLeave()},e.prototype._update=function(e){var t=this;return this.apiEvents.addListener("update",e),this.removableListeners.push(function(){t.apiEvents.removeListener("to",e)}),this.getToNLeave()},e.prototype._leave=function(e){var t=this;return this.apiEvents.addListener("leave",e),this.removableListeners.push(function(){t.apiEvents.removeListener("to",e)}),this.getToNLeave()},e.prototype.close=function(){this.removableListeners.forEach(function(e){e()}),this.removableListeners=[],this.closeFromManager(this)},e.prototype.getToNLeave=function(){return{to:this._to,update:this._update,leave:this._leave,close:this.close}},e}();r["default"]=a},{"../utils/ApiEvents":10}],5:[function(t,r,n){Object.defineProperty(n,"__esModule",{value:!0});var a,o=t("./Main"),i=t("./Router/Router"),s=t("./playlistManager/PlaylistManager");!function(t){var r=function(){function t(){e.Class.SystemMain=o.Main,e.Class.PlaylistManager=s["default"];var t=new i["default"],r={};Object.defineProperty(r,"match",{value:t.match.bind(t),writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(r,"goTo",{value:t.goTo.bind(t),writable:!1,enumerable:!0,configurable:!1}),NIApi.register("common.Router",r)}return t}();t.SystemTs=r}(a||(a={})),new a.SystemTs},{"./Main":3,"./Router/Router":4,"./playlistManager/PlaylistManager":9}],6:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),e("es6-promise");var n=e("../utils/XHRPromise"),a=e("../utils/XHRPromise"),o=e("./ModuleInternal"),i=e("../utils/ModuleError"),s="js/index.js",u=function(){function e(e,t){this.dataModuleOrig=e,this.modules=t,this._executable=!1,this.dataModule={},this.moduleError=new i.ModuleError,this.setParamName(),this.setParamTextContent(),this.setParamVersion(),this.setParamEnable(),this.setParamParameters(),this.setParamPath(),this.moduleInternal=new o["default"](this.dataModule,this.modules)}return e.prototype.init=function(){var e=this;if(this.moduleError.thereIsErrors()===!0)return this.rejectModule();var t=new Promise(function(t,r){var o=new n["default"](a.Protocol.GET,e.dataModule.path);o.init().then(function(n){e.innerScript=n.responseText,e.safeExecute().then(function(){t()})["catch"](function(t){e.moduleError.thereIsErrors()===!0&&e.rejectModule(),r(t)})})["catch"](function(e){r(e)})});return t},e.prototype.getModuleName=function(){return this.dataModule.name},e.prototype.getNameSpace=function(){return this.moduleInternal.getNameSpace()},e.prototype.rejectModule=function(){return Promise.reject("Error")},e.prototype.safeExecute=function(){var e=this,t=this.moduleInternal.safeExecute(this.innerScript);return t.then(function(){})["catch"](function(t){e.moduleError.add(t,i.MESSAGESERRORS.moduleScriptError,e.dataModuleOrig)}),t},Object.defineProperty(e.prototype,"innerScript",{get:function(){return this._innerScript},set:function(e){try{e=e.trim()}catch(t){e="",this.moduleError.add("...",i.MESSAGESERRORS.moduleEmpty,this.dataModuleOrig)}this._innerScript=e},enumerable:!0,configurable:!0}),e.prototype.setParamName=function(){var e=this.dataModuleOrig.name;try{if(e=e.trim(),!!e==!1)throw"error";this.dataModule.name=e}catch(t){return void this.moduleError.add("...",i.MESSAGESERRORS.name,this.dataModuleOrig)}},e.prototype.setParamTextContent=function(){var e=this.dataModuleOrig.textContent||"";try{e=e.trim()}catch(t){}this.dataModule.textContent=e},e.prototype.setParamEnable=function(){var e=this.dataModuleOrig.enable;try{e=e.trim(),this.dataModule.enable="true"===e}catch(t){this.moduleError.add("...",i.MESSAGESERRORS.enable,this.dataModuleOrig)}},e.prototype.setParamVersion=function(){var e=this.dataModuleOrig.version;try{this.dataModule.version=e.trim()}catch(t){this.moduleError.add("...",i.MESSAGESERRORS.version,this.dataModuleOrig)}},e.prototype.setParamUserAgentFilter=function(){var e=this.dataModuleOrig.userAgentFilter;try{this.dataModule.userAgentFilter=e.trim()}catch(t){this.moduleError.add("...",i.MESSAGESERRORS.userAgentFilter,this.dataModuleOrig)}},e.prototype.setParamPath=function(){var e=this.dataModuleOrig.path;try{e=e.trim(),e.indexOf("/")!==e.length&&(e=e.concat("/")),this.dataModule.path=e.concat(s)}catch(t){this.moduleError.add("...",i.MESSAGESERRORS.path,this.dataModuleOrig)}},e.prototype.setParamParameters=function(){var e,t=this.dataModuleOrig.parameters;try{t=t.trim(),e=new Function("return "+t+"||{};")()}catch(r){return void this.moduleError.add(r,i.MESSAGESERRORS.parameters,this.dataModuleOrig)}if(e=e||{},this.dataModule.parameters={},e instanceof Object)for(var n in e)this.dataModule.parameters[n]=e[n];else;},e}();r["default"]=u},{"../utils/ModuleError":11,"../utils/XHRPromise":13,"./ModuleInternal":7,"es6-promise":1}],7:[function(t,r,n){Object.defineProperty(n,"__esModule",{value:!0}),t("es6-promise");var a=t("../utils/ModuleError"),o=t("../utils/SplitPromise"),i=function(){function t(e,t){this.dataModule=e,this.modules=t,this._exports={},this.onReady=new o["default"],this.moduleError=new a.ModuleError,this.setNameSpace()}return t.prototype.safeExecute=function(e){this.innerScript=e;var t,r;t=this.getNameSpace();try{return r=new Function("nModule",this.innerScript).bind(t)(t),this.onReady.resolve(t),Promise.resolve()}catch(n){return this.onReady.reject(n),Promise.reject(n)}},t.prototype.getNameSpace=function(){return this.nameSpace},Object.defineProperty(t.prototype,"innerScript",{get:function(){return this._innerScript},set:function(e){this._innerScript=e},enumerable:!0,configurable:!0}),t.prototype.require=function(e){},Object.defineProperty(t.prototype,"exports",{get:function(){return this._exports},set:function(e){this._exports=e},enumerable:!0,configurable:!0}),t.prototype.moduleEvent=function(e,t){var r=this.modules[e];if(!r){var n=[];for(var a in this.modules)n.push(a);return Promise.reject('The module "'+e+'" not exist with this name, the current exists modules are : '+n.join(", "))}switch(t){case"ready":return r.onReady()}return r.onReady()},t.prototype.setNameSpace=function(){var t=this,r=this;this.nameSpace={},Object.defineProperty(this.nameSpace,"webpublicationNamespace",{enumerable:!0,configurable:!1,writable:!1,value:webpublicationNamespace||e}),Object.defineProperty(this.nameSpace,"data",{enumerable:!0,configurable:!1,writable:!1,value:this.dataModule}),Object.defineProperty(this.nameSpace,"exports",{enumerable:!0,configurable:!1,get:function(){return r.exports},set:function(e){r.exports=e}}),Object.defineProperty(this.nameSpace,"modules",{enumerable:!0,configurable:!1,writable:!1,value:this.modules}),Object.defineProperty(this.nameSpace,"require",{enumerable:!0,configurable:!1,writable:!1,value:this.require}),Object.defineProperty(this.nameSpace,"onReady",{enumerable:!0,configurable:!1,writable:!1,value:function(){return t.onReady}}),Object.defineProperty(this.nameSpace,"on",{enumerable:!0,configurable:!1,writable:!1,value:function(e,r){return t.moduleEvent(e,r)}})},t}();n["default"]=i},{"../utils/ModuleError":11,"../utils/SplitPromise":12,"es6-promise":1}],8:[function(t,r,n){var a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n["throw"](e))}catch(t){o(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&r[0]?o["return"]:r[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,o=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){u.label=r[1];break}if(6===r[0]&&u.label<i[1]){u.label=i[1],i=r;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(r);break}i[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(n){r=[6,n],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(n,"__esModule",{value:!0}),t("es6-promise");var i=t("./Module"),s=t("../utils/SplitPromise"),u=function(){function t(){this.modules={},this.modulesPrivate={},this.modulesReady={},this.modulesArray=[]}return t.prototype.init=function(){var t=this;this.dataModules=e.Main.xmlManager.get("common-ui","modules");var r=new Promise(function(e,r){t.resolveModules(t.dataModules).then(function(){t.loadModules().then(function(){return e()})["catch"](function(){console.warn("Something wrong with modules!"),r("Something wrong with modules!")})})});return r},Object.defineProperty(t.prototype,"userAgent",{get:function(){return e.Param.userAgent},enumerable:!0,configurable:!0}),t.prototype.resolveValues=function(t){for(var r in t){var n=r;t[n]=e.Utils.resolveVariable(t[n])}return Promise.resolve()},t.prototype.resolveModules=function(e){var t=[];for(var r in e)t.push(this.resolveValues(e[r]));return Promise.all(t)},t.prototype.getParamName=function(e){var t=e.name;return"string"!=typeof t?null:(t=t.trim(),!!t==!1?null:t)},t.prototype.checkUserAgentFilter=function(e){var t=new RegExp(e,"gim"),r=this.userAgent.device.type.match(t);if(null===r){var n=window.location.search;r=n.match(t)}return null===r&&(r=navigator.userAgent.match(t)),r},t.prototype.loadModules=function(){return a(this,void 0,void 0,function(){var e,t,r,n,a,i,u,l,a,i;return o(this,function(o){switch(o.label){case 0:for(e=[],r=this.dataModules.slice(0),a=0,i=this.dataModules.length;a<i;a++)if(n=r[a],u=this.checkUserAgentFilter(n.userAgentFilter),l=this.getParamName(n),null!==u&&"false"!==n.enable){if(null===l||void 0!==this.modulesReady[l])throw'\nyou can use a multiple modules with same name: "'+l+'"\t\t\t\t\t\nonly if the filters gives different result.\t\t\t\t\t\nOr : you can not enable module with name "'+l+'",\t\t\t\t\t\nthere is another module with the same name which is enabled yet!.';this.modulesReady[l]=new s["default"],t=this.preSetModule(n),e.push(t)}a=0,i=this.modulesArray.length,o.label=1;case 1:return a<i?(n=r[a],t=this.loadModule(this.modulesArray[a]),"false"!==n.asynchronous?[3,3]:[4,t]):[3,5];case 2:o.sent(),o.label=3;case 3:e.push(t),o.label=4;case 4:return a++,[3,1];case 5:return[2,Promise.all(e)]}})})},t.prototype.preSetModule=function(e){var t=this,r=new Promise(function(r,n){var a=new i["default"](e,t.modules),o=a.getModuleName();t.modules[o]=a.getNameSpace(),t.modulesArray.push(a),t.modulesPrivate[o]=a,r()});return r},t.prototype.loadModule=function(e){var t=this,r=e.init();return r.then(function(){t.modulesReady[e.getModuleName()].resolve(e.getNameSpace())})["catch"](function(r){t.modulesReady[e.getModuleName()].reject(r)}),r},t}();n["default"]=u},{"../utils/SplitPromise":12,"./Module":6,"es6-promise":1}],9:[function(t,r,n){Object.defineProperty(n,"__esModule",{value:!0});var a;!function(e){e.PAGE="dpp",e.TAB_CHAPTER="dpt",e.SUMMARY_CHAPTER="dps"}(a||(a={}));var o=function(){function t(t,r){this.parent=t,this.viewMain=r,this.isEnabled=!1,this.pageIndexes=[];var n=e.Main.xmlManager.get("common-ui","configs","dynamicPlaylist").enabled,o=new URLSearchParams(window.location.search),i=o.has(a.PAGE)||o.has(a.TAB_CHAPTER)||o.has(a.SUMMARY_CHAPTER);this.isEnabled=n&&i,this.isEnabled&&(this.pageIndexes=this.getPageIndexesFromUrl(o))}return Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pageIndexes.length},enumerable:!0,configurable:!0}),t.prototype.getPageIndexes=function(){return this.pageIndexes},t.prototype.getOriginalPageIndex=function(e){return this.pageIndexes[e]},t.prototype.getOriginalPageNumber=function(e){return this.pageIndexes[e-1]+1},t.prototype.getPlaylistedPageNumber=function(e){return this.pageIndexes.indexOf(e-1)+1},t.prototype.getInitialPageCount=function(){return e.Main.xmlManager.get("common-configuration","config","pageCount")},t.prototype.getPageIndexesFromUrl=function(e){return this.getPageNumbersFromUrl(e).map(function(e){return e-1})},t.prototype.getPageNumbersFromUrl=function(e){var t=e.get(a.PAGE);if(t)return this.getPageNumbersFromPageParam(t);var r=e.get(a.TAB_CHAPTER);if(r)return this.getPageNumbersFromTabChaptersParam(r);var n=e.get(a.SUMMARY_CHAPTER);return n?this.getPageNumbersFromSummaryChaptersParam(n):[]},t.prototype.getPageNumbersFromPageParam=function(e){var t=this.getInitialPageCount();return e.split(",").map(Number).filter(function(e){return e>=1&&e<=t})},t.prototype.getPageNumbersFromTabChaptersParam=function(t){var r=this,n=e.Main.xmlManager.get("common-ui","configs","chapters"),a=t.split(","),o=[];return a.forEach(function(e){o.push.apply(o,r.getPageNumbersByTabChapterId(n,e))}),o},t.prototype.getPageNumbersByTabChapterId=function(e,t){try{var r=[],n=e.findIndex(function(e){return e.id===t}),a=e[n];if(!a)throw"Dynamic Playlist Error: Chapter not found in Tab config";var o=a.page;if(!o)throw"Dynamic Playlist Error: missing page attribute in Tab config";for(var i=this.getTabChapterLastPage(e,n),s=Number(o);s<=i;s++)r.push(s);return r}catch(u){return[]}},t.prototype.getTabChapterLastPage=function(e,t){var r=this.getNextTabChapter(e,t);if(!r)return this.getInitialPageCount();var n=r.page,a=e[t].page;return a===n?Number(a):Number(n)-1},t.prototype.getNextTabChapter=function(e,t){for(var r=t+1;r<e.length;r++)if("tab"===e[r].type)return e[r];return null},t.prototype.getPageNumbersFromSummaryChaptersParam=function(t){var r=this,n=e.Main.xmlManager.get("summary","xml"),a=t.split(","),o=[];return a.forEach(function(e){o.push.apply(o,r.getPageNumbersBySummaryChapterId(n,e))}),o},t.prototype.getPageNumbersBySummaryChapterId=function(e,t){try{var r=[],n=e.querySelector('it[id="'+t+'"]');if(!n)throw"Dynamic Playlist Error: Chapter not found in summary config";var a=n.getAttribute("p");if(!a)throw"Dynamic Playlist Error: missing p (page) attribute in summary config";for(var o=this.getSummaryChapterLastPage(n),i=Number(a);i<=o;i++)r.push(i);return r}catch(s){return[]}},t.prototype.getSummaryChapterLastPage=function(e){var t=this.getNextSummaryChapter(e);if(!t)return this.getInitialPageCount();var r=t.getAttribute("p"),n=e.getAttribute("p");return n===r?n:r-1},t.prototype.getNextSummaryChapter=function(e){var t=e.nextElementSibling;return t?"COMMENT"===t.getAttribute("t")?this.getNextSummaryChapter(t):t:e.parentNode?this.getNextSummaryChapter(e.parentNode):null},t}();n["default"]=o},{}],10:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this.listeners={},this.iName="ApiEvent"}return e.prototype.addListener=function(e,t){"undefined"==typeof this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].indexOf(t)===-1&&this.listeners[e].push(t)},e.prototype.fire=function(e){var t,r,n=0,a=0;if(e.target||(e.target=this),e.context||(e.context=this),this.listeners[e.type]instanceof Array){t=this.listeners[e.type],r=[];var o=void 0;for(a=t.length;n<a;n++)r.push(t[n]);for(;o=r.shift();)t.indexOf(o)!==-1&&o(e)}},e.prototype.removeListener=function(e,t){var r,n=0,a=0;if(this.listeners[e]instanceof Array)for(r=this.listeners[e],n=r.length;a<n;a++){if(null!==t&&r[a]===t){r.splice(a,1);break}null===t&&r.splice(a,1)}},e}();r.ApiEvents=n},{}],11:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={name:"module error =>  'name' attribute !,",enable:"module error =>  'enable' attribute !,",parameters:"module error =>  'parameters' attribute !,",path:"module error =>  'path' attribute !,",version:"module error =>  'version' attribute !,",userAgentFilter:"module error =>  'version' attribute !,",moduleEmpty:"module is empty !,",moduleScriptError:"Script error in module !,"};r.MESSAGESERRORS=n;var a=function(){function e(){this._errorStatus=!1,this.errorReasons=[]}return e.prototype.add=function(e,t,r){this.errorStatus=!0,this.errorReasons.push([t,e]),console.warn(r,e)},e.prototype.getMessages=function(){var e="";return this.errorReasons.forEach(function(t){e=e.concat(t.join("\n and \n"))}),e},e.prototype.thereIsErrors=function(){return this.errorStatus},Object.defineProperty(e.prototype,"errorStatus",{get:function(){return this._errorStatus},set:function(e){this._errorStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorReasons",{get:function(){return this._errorReasons},set:function(e){this._errorReasons=e},enumerable:!0,configurable:!0}),e}();r.ModuleError=a},{}],12:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),e("es6-promise");var n=function(){function e(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r});var t=this.promise;this.then=t.then.bind(t),this["catch"]=t["catch"].bind(t)}return e}();r["default"]=n},{"es6-promise":1}],13:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.GET="GET",e.get="GET",e.POST="POST",e.post="POST",e}();r.Protocol=n;var a=function(){function e(e,t,r){void 0===e&&(e=n.GET),void 0===t&&(t=""),void 0===r&&(r=null),this.protocol=e,this.url=t,this.data=r,this.xhr=new XMLHttpRequest}return e.prototype.onreadystatechange=function(){if(4===this.xhr.readyState)return 404===this.xhr.status?void this.reject(this):void this.resolve(this.xhr)},e.prototype.executeur=function(e,t){this.resolve=e,this.reject=t,this.xhr.open(this.protocol,this.url,!0),this.xhr.onreadystatechange=this.onreadystatechange.bind(this),this.xhr.send(this.data)},e.prototype.init=function(){return new Promise(this.executeur.bind(this))},e}();r["default"]=a},{}]},{},[5])}(window.webpublicationNamespace||window.w),function(e){var t=function(){e.Param.pathRoot=e.Main.xmlManager.getVariable("root"),e.Param.pathMobile=e.Param.pathRoot+"mobile/",e.Param.pathRootForWorker="../../../",e.Param.pathCss=e.Param.pathMobile+"css/",e.Param.pathIcon=e.Param.pathMobile+"icons/",e.Param.pathImage=e.Param.pathMobile+"img/",e.Param.pathJavaScript=e.Param.pathMobile+"js/",e.Param.pathTemplate=e.Param.pathMobile+"template/",e.Starter.currentPage=0,e.Starter.isMaster=!1,e.Starter.appInfo={},e.Param.eventStart="mousedown",e.Param.eventMove="mousemove",e.Param.eventStop="mouseup",e.Param.eventOut="mouseout",e.Param.eventMouseWheel="mousewheel",e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.FIREFOX&&(e.Param.eventMouseWheel="DOMMouseScroll"),e.Param.userAgent.os.name!==e.Param.userAgent.OS.ANDROID&&e.Param.userAgent.os.name!==e.Param.userAgent.OS.IOS||!e.Param.isTouch||(e.Param.eventStart="touchstart",e.Param.eventMove="touchmove",e.Param.eventStop="touchend",e.Param.eventOut="touchend"),e.Param.eventClick="click"};t.prototype.callbackLoaded=function(t){return e.Starter.isMaster=!1,e.Starter.main=new e.Class.Main,e.Starter.main.init(),!1},t.prototype.initSlide=function(){function t(){var t=0,r=0;for(var n in a)t+=a[n],r++;var i=t/r;return e.Main.javascriptInit.setPreloaderValue(i),!o&&Math.floor(i)>=100&&(o=!0,e.Main.javascriptInit.callbackLoaded()),i}function r(e){if(e.lengthComputable){var r=100*e.loaded/e.total;a[this.url]=r,100!==r&&t()}}function n(e){if(4===this.readyState){if(0===this.status||200===this.status){var r=document.createElement("script");r.type="text/javascript",r.textContent=this.responseText,document.head.appendChild(r)}a[this.url]=100,t()}}var a={},o=!1;a[e.Param.pathJavaScript+"minall.js"]=0;var i=e.Main.xmlManager.get("common-ui","assets","custom_javascript");if(i)for(var s=0;s<i.length;s++)i[s]&&i[s].url?a[e.Utils.resolveVariable(i[s].url)]=0:i[s]&&(a[e.Utils.resolveVariable(i[s])]=0);for(var s in a){var u=new XMLHttpRequest;u.url=s,u.onprogress=r,u.onreadystatechange=n,u.open("GET",s,!0),u.send()}},t.prototype.setPercentageExternal=function(t){e.Main.javascriptInit.setPreloaderValue(t)},t.prototype.getPreloader=function(){var e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve" id="publicationDownloader22_31_163" class="rss-loader-circle" data-background="292929" data-fill="469bd7"><circle class="circlebackground" cx="25" cy="25" fill="none" r="23" stroke="#292929" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"></circle><circle class="circle" cx="25" cy="25" fill="none" r="23" stroke="#292929" stroke-linecap="round" stroke-miterlimit="10" stroke-width="3"></circle></svg>',t=document.createElement("div");t.classList.add("loader-circle"),t.classList.add("loader-circle-left");var r=document.createElement("div");r.classList.add("loader-circle"),r.classList.add("loader-circle-right");var n=document.createElement("div");n.classList.add("loader-wrapper"),n.innerHTML=e;var a=document.createElement("div");a.classList.add("loader-placeholder"),a.innerText="0%";
var o=document.createElement("div");o.classList.add("loader"),o.style.display="none",o.appendChild(a),o.appendChild(n);var i=n.querySelector(".circle");document.body.appendChild(o),this.setPreloaderValue=function(e){return e=Math.ceil(e),e=e>100?100:e,i.style.strokeDashoffset=150-150*e/100,a.innerText=e+"%",!1},this.removePreloader=function(e){o.classList.add("animation_fadeOut"),setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o),e&&e()},200)}},e.Class.JavascriptInit=t}(webpublicationNamespace),function(e){function t(t){return i.hasOwnProperty(t)===!1&&(i[t]=new Promise(function(r,n){o(t).then(function(t){e.Utils.promiseXHR("GET",t).then(function(n){r(!0),404!==n.status&&e.Main.cssManager.addLoaded([{url:t,text:n.responseText}])})["catch"](r)})})),i[t]}function r(e){return i.hasOwnProperty(e)===!1&&(i[e]=new Promise(function(t,r){o(e).then(function(e){var r=document.createElement("script");r.src=e,r.onload=t,r.onerror=t,document.head.appendChild(r)})})),i[e]}function n(t){return o(t).then(function(t){return e.Utils.promiseXHR("GET",t)})}var a={css:{},js:{},template:{}},o=function(){function t(e){var t=JSON.parse(e.responseText);for(var r in t.template)t.template[r]&&(a.template["publication/mobile/template/"+r+".html"]=t.template[r]);for(r in t.css)t.css[r]&&(a.css["css/"+r+".css"]=t.css[r]);for(r in t.js)t.js[r]&&(a.js["js/"+r+".js"]=t.js[r]);return Promise.resolve(a)}var r=null;return function(n){if(null===r){var o=e.Main.xmlManager.get("common-ui","assets","custom_template");r=o?e.Utils.promiseXHR("GET",e.Utils.resolveVariable("$template$template.json")).then(t)["catch"](function(){return Promise.resolve({css:{},js:{},template:{}})}):Promise.resolve({css:{},js:{},template:{}})}return r.then(function(){return n=n.replace(/^\.\//,""),n.indexOf(".css")!==-1?n=a.css[n]?a.css[n]:e.Main.xmlManager.getVariable("root")+"mobile/"+n:n.indexOf(".js")!==-1?n=a.js[n]?a.js[n]:e.Main.xmlManager.getVariable("root")+"mobile/"+n:n.indexOf(".html")!==-1&&a.template[n]&&(n=a.template[n]),n=e.Utils.resolveVariable(n),Promise.resolve(n)})}}(),i={};e.require=function(e){if("string"==typeof e)return n(e);for(var a=[],o=0,i=e.length;o<i;o++)0===e[o].indexOf("css/")?a.push(t(e[o]+".css")):0===e[o].indexOf("js/")?a.push(r(e[o]+".js")):e[o].indexOf(".js")!==-1?a.push(r(e[o])):e[o].indexOf(".css")!==-1&&a.push(t(e[o]));return Promise.all(a)},e.addCustomTemplate=function(e,t,r){a[e][t]=r}}(webpublicationNamespace),function(e){e.Main.commonLayout=new e.Class.CommonLayout;var t=e.Utils.resolveVariable(e.Main.xmlManager.get("common-ui","assets","localeHtml").url),r=e.Utils.resolveVariable(e.Main.xmlManager.get("common-ui","assets","localeFlash").url),n=e.Main.xmlManager.get("common-configuration","contents","summary","path"),a=[e.Main.xmlManager.parse("locale",t),e.Main.xmlManager.parse("localeFlash",r),e.Main.xmlManager.parse("summary",n),e.Main.commonLayout.fetch()];Promise.all(a).then(function(){var t=e.Utils.resolveVariable(e.Main.xmlManager.get("common-ui","assets","css").url),r=e.Utils.resolveVariable(e.Main.xmlManager.get("common-ui","assets","custom_css"))||[];e.Main.cssManager=new e.Class.CssManager,e.Main.cssManager.init(t).then(function(){return e.Main.cssManager.load(["publication/mobile/css/index.css","publication/mobile/css/autoprefixed.css"])}).then(function(){var t=[].concat(r.map(function(e){return e.url}));return t.length>0?e.Main.cssManager.load(t):Promise.resolve()}).then(function(){return e.Starter=new e.Class.Starter,e.systemMain=new e.Class.SystemMain,Promise.resolve()}).then(function(t){e.Starter.init()})})}(webpublicationNamespace),function(e){function t(){}t.prototype.init=function(){var t=["epub-HTML","pdf-HTML","pdf-SVG","pdf-PDF","pdf-IMG"],r=e.Main.urlManager.get("pageType");if(e.Param.newViewerVersion="v4"===e.Main.urlManager.get("viewer")||"v4"===e.Main.startupManager.get("core.viewer"),e.Param.newThemeVersion=e.Main.startupManager.has("ui.theme.mode","v4")||"v4"===e.Main.urlManager.get("theme"),e.Param.viewerMode="canvas",["canvas","html"].indexOf(e.Main.urlManager.get("mode"))>=0?e.Param.viewerMode=e.Main.urlManager.get("mode"):e.Main.startupManager.has("core.mode","html")&&(e.Param.viewerMode="html"),e.Param.viewerFormat="img",["img","svg"].indexOf(r)>=0)e.Param.viewerFormat=r;else if(e.Main.startupManager.has("core.format","svg")&&e.Main.xmlManager.get("common-configuration","contents","svg"))e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.IE&&(e.Param.viewerFormat="svg");else{var n=t.indexOf(r);if(n!==-1)e.Param.viewerFormat=t[n],e.Param.viewerMode="html";else for(var a=0,o=t.length;a<o;a++)if(e.Main.startupManager.has("core.format",t[a])){e.Param.viewerFormat=t[a],e.Param.viewerMode="html";break}}if(e.Param.overload={},this.globalFileToLoad=6,this.defaultViewportScale=.8,e.Param.viewHtml=document.querySelector("html"),e.Param.devicePixelRatio=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,this.metaViewportDefinerF(),"ie"===e.Param.userAgent.browser.name&&10===e.Param.userAgent.browser.version&&navigator.userAgent.match(/IEMobile\/10\.0/)){var i=document.createElement("style");i.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(i)}"phone"!==e.Param.userAgent.device.type&&"phablet"!==e.Param.userAgent.device.type&&"tab"!==e.Param.userAgent.device.type&&document.location.search.indexOf("forceMobile")===-1&&document.location.search.indexOf("version=html")===-1&&"html"!==e.Main.startupManager.get("reader.type")&&e.Main.switcher.mobileSupported!==!0||this.currDocReady()},t.prototype.getBestDPIAndroid=function(e){var t=160,r=window.innerWidth,n=384e3*window.devicePixelRatio,a="device-dpi",o=1,i=1;e===!0&&(n*=window.screen.height*window.screen.width/384e3/window.devicePixelRatio);var s=document.createElement("meta");s.setAttribute("name","viewport"),s.setAttribute("content","target-densitydpi=device-dpi,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"),document.head.appendChild(s);var u=window.innerWidth,l=window.innerHeight,c=u*l,p=t*u/r;return document.head.removeChild(s),c>n&&(o=n/c,i=u/r,a=p*o+"dpi"),{dpi:a,ratio:o,scale:i}},t.prototype.metaViewportDefinerF=function(){var t=null,r=null;return function(){var n=[],a=window.devicePixelRatio;a||(a=window.screen.deviceXDPI/window.screen.logicalXDPI),a=("1"===e.Main.urlManager.get("vp")||e.Param.newViewerVersion,1),"chrome"===e.Param.userAgent.browser.name||"firefox"===e.Param.userAgent.browser.name?"phone"===e.Param.userAgent.device.type?this.defaultViewportScale=1/Math.min(a,2):this.defaultViewportScale=1:"android"===e.Param.userAgent.os.name?(t="phone"===e.Param.userAgent.device.type?this.getBestDPIAndroid():this.getBestDPIAndroid(!0),this.defaultViewportScale=1/Math.round(t.scale),n.push("target-densitydpi="+t.dpi),document.querySelector("html").style.fontSize=13.5*t.scale+"px"):e.Param.userAgent.os.name===e.Param.userAgent.OS.WINDOWS?this.defaultViewportScale=1:this.defaultViewportScale=1/a,n.push("initial-scale="+this.defaultViewportScale),n.push("minimum-scale="+this.defaultViewportScale),n.push("maximum-scale="+this.defaultViewportScale),n.push("user-scalable=no"),r=document.createElement("meta"),r.setAttribute("name","viewport"),r.setAttribute("content",n.join(",")),document.head.appendChild(r)}}(),t.prototype.currDocReadyInitialize=function(){var t=Math.round(10/this.defaultViewportScale)/10;e.Param.valuePixelRatio=t,e.Param.viewHtml.classList.add("webpub-device__type-"+e.Param.userAgent.device.type),e.Param.viewHtml.classList.add("webpub-device__os-name-"+e.Param.userAgent.os.name.toLowerCase()),e.Param.viewHtml.classList.add("webpub-device__browser-name-"+e.Param.userAgent.browser.name.toLowerCase()),e.Param.viewHtml.classList.add("webpub-device__os-version-"+e.Param.userAgent.os.version.replace(".","_")),e.Param.viewHtml.classList.add("webpub-device__pixelratio-"+t.toString().replace(".","-"));var r=document.body.style;""!==r.webkitFlexWrap&&""!==r.msFlexWrap&&""!==r.flexWrap||e.Param.viewHtml.classList.add("webpub-support-flex"),e.Param.isApp&&e.Param.viewHtml.classList.add("isApp");for(var n=document.body.getElementsByTagName("script"),a=0;a<n.length;a++)n[a].parentNode.removeChild(n[a]);e.Param.viewMain=document.createElement("div"),e.Param.viewMain.classList.add("mainView");var o;o=e.Main.commonLayout.get("general.backgroundImage"),o&&o.url&&(e.Param.viewMain.style.backgroundImage="url("+e.Utils.resolveVariable(o.url)+")","repeat"===o.scale?e.Param.viewMain.style.backgroundRepeat="repeat":"cover"===o.scale&&(e.Param.viewMain.style.backgroundSize="cover")),document.body.insertBefore(e.Param.viewMain,document.querySelector(".loader")),e.Main.javascriptInit.initSlide()},t.prototype.currDocReady=function(){e.Main.javascriptInit=new e.Class.JavascriptInit,e.Main.javascriptInit.getPreloader();var t=e.Main.urlManager.get("waitInitializeFromNative");t||this.currDocReadyInitialize()},t.prototype.getCurrentPage=function(){return e.Main.pagesLoaderNew.getCurrentPage()},e.Class.Starter=t}(webpublicationNamespace),function(e){"use strict";function t(){var e=this;this.initialized={},this.initialized.promise=new Promise(function(t,r){e.initialized.resolve=t,e.initialized.reject=r}),this.initialized.then=this.initialized.promise.then.bind(this.initialized.promise)}function r(e,t){for(var n in t)t[n]instanceof Object?(e[n]instanceof Object==!1&&(e[n]={}),r(e[n],t[n])):t[n]instanceof Array?(e[n]instanceof Array==!1&&(e[n]=[]),r(e[n],t[n])):e[n]=t[n]}function n(e,t){r(e,t),r(t,e)}function a(e,t,r,n){var o=e[t][r],i=/([a-zA-Z]+)\.([a-zA-Z]+)/g,s=i.exec(o),u=!!s;if(!u)return o;var l=s[1],c=s[2];return n>10?(console.error("There is probably a loop in the styles.css properties",l,c),o):a(e,l,c,n+1)}var o={};t.prototype.globalElements={};var i=t.prototype.globalElements;t.prototype.style={primary:{action2Alpha:"1",action2Color:"#469bd7",actionAlpha:"1",actionColor:"#469bd7",altPopupBackgroundAlpha:"1",altPopupBackgroundColor:"#ffffff",backgroundAlpha:"1",backgroundColor:"#f3f3f3",cardAlpha:"1",cardColor:"#ffffff",contentActionAlpha:"1",contentActionColor:"#7c7c7c",contentAlpha:"1",contentColor:"#8c8c8c",lateralArrowsBackgroundAlpha:"1",lateralArrowsBackgroundColor:"#ffffff",lateralArrowsBackgroundShadowAlpha:"0",lateralArrowsBackgroundShadowColor:"#000000",lateralArrowsColor:"#8c8c8c",lateralArrowsAlpha:"1",lateralArrowsOpacity:"1",spacerAlpha:"1",spacerColor:"#cecece",strongAlpha:"1",strongColor:"#292929",tooltipBackgroundAlpha:"1",tooltipBackgroundColor:"#cecece",tooltipShadowAlpha:"0",tooltipShadowColor:"#000000",tooltipTextAlpha:"1",tooltipTextColor:"#292929",topnavAlpha:"1",topnavColor:"#ffffff",topnavIconAlpha:"1",topnavIconColor:"#469bd7",topnavShadowAlpha:"0",topnavShadowColor:"#000000"},secondary:{activeAlpha:"1",activeColor:"#e7b845",alertAlpha:"1",alertColor:"#f14d4d",altContentAlpha:"1",altContentColor:"#8c8c8c",altPopupAlpha:"1",altPopupColor:"#ffffff",linkAlpha:"0.15",linkBackgroundColor:"#0000ff",linkColor:"#ff0000",notificationAlpha:"1",notificationColor:"#31c531"},pushmenu:{activeAlpha:"1",activeColor:"#469bd7",backgroundAlpha:"1",backgroundColor:"#333333",contentAlpha:"1",contentColor:"#a4a4a4",iconAlpha:"1",iconColor:"#ffffff",spacerAlpha:"1",spacerColor:"#434343",strongAlpha:"1",strongBackgroundAlpha:"1",strongBackgroundColor:"#222222",strongColor:"#696969"},asidemenu:{contentColor:"#000000",backgroundColor:"#ffffff",hoverColor:"#f1f1f1"},ontouch:{alertAlpha:"1",alertColor:"#f14d4d",backgroundAlpha:"1",backgroundColor:"#333333",cardAlpha:"1",cardColor:"#ffffff",contentAlpha:"1",contentColor:"#8c8c8c",primaryBackgroundAlpha:"1",primaryBackgroundColor:"#ffffff",primaryCardAlpha:"1",primaryCardColor:"#fafafa",primaryContentAlpha:"1",primaryContentColor:"#469bd7",pushmenuBackgroundAlpha:"1",pushmenuBackgroundColor:"#434343",secondaryAlertAlpha:"1",secondaryAlertColor:"#ff7676"},lightbox:{altPopupBackgroundAlpha:"1",altPopupBackgroundColor:"#ffffff",backgroundAlpha:"0.8",backgroundColor:"#f3f3f3",cardAlpha:"1",cardColor:"#ffffff",contentActionAlpha:"1",contentActionColor:"#7c7c7c",contentAlpha:"1",contentColor:"#8c8c8c",spacerAlpha:"1",spacerColor:"#cecece",strongAlpha:"1",strongColor:"#292929",topnavAlpha:"1",topnavColor:"#ffffff",topnavIconAlpha:"1",topnavIconColor:"#469bd7",topnavShadowAlpha:"0",topnavShadowColor:"#000000",actionColor:"#469bd7",actionAlpha:"1"},spread:{backgroundAlpha:"0",backgroundColor:"#ffffff",backgroundShadowColor:"#000000",backgroundShadowAlpha:"0"},loader:{backgroundCircleColor:"#ffffff",foregroundCircleColor:"#000000",contentColor:"#555555"},layout:{macTopBarHeight:"34px",notchHeight:"36px"}};var s=t.prototype.style;t.prototype.styleProperties={};var u=new RegExp("color\\(\\s*\\#([0-9a-f]{6})\\s*wpalpha\\(\\s*([0-1]?(\\.[0-9]+)?)\\s*\\)\\s*\\)","gi"),l=function(t,r,n,a,o,i){return e.Utils.hexToRgb(r,n)};t.prototype.init=function(t){return e.Utils.promiseXHR("GET",t).then(function(e){var t=new RegExp("\\.([\\w\\s]+){([^}]+)}","gmi"),r=e.responseText,n=void 0;for(var a in s)for(var i in s[a])o[a+"."+i]=s[a][i];for(;n=t.exec(r);){var u=new RegExp("([\\w\\s]+):([^;]+);","gmi"),l=void 0,c=n[1].trim(),p=n[2].trim();for(s[c]=s[c]||{};l=u.exec(p);){var h=l[1].trim(),d=l[2].trim();s[c][h]=d,o[c+"."+h]=d}}for(var f in s)for(var m in s[f])void 0!==o[s[f][m]]&&(s[f][m]=o[s[f][m]]);this.initialized.resolve()}.bind(this))},t.prototype.convertFromPercentIfNeeded=function(e,t){var r=e.endsWith("Alpha")||e.endsWith("Opacity");return r&&parseFloat(t)>1?parseFloat(t)/100:t},t.prototype.parseCss=function(e,t,r){var o=void 0,i=void 0,c=void 0,p="css-"+t;r=r||{},n(s,r);for(o in r)for(i in r[o]){var h=a(r,o,i,0);h=this.convertFromPercentIfNeeded(i,h),e=e.replace(new RegExp("var\\("+o+"\\-"+i+"\\)","gi"),h)}e=e.replace(u,l),c=document.getElementById(p)||document.createElement("style"),c.id=p,c.type="text/css",c.styleSheet?c.styleSheet.cssText=e:c.textContent=e,null===c.parentElement&&document.head.appendChild(c)},t.prototype.reParseCss=function(e){for(var r in i)t.prototype.parseCss(i[r].data,i[r].url,e)},t.prototype.addLoaded=function(e){var t=this;e.forEach(function(e){var r="css-"+e.url;i[r]={url:e.url,data:e.text},t.parseCss(e.text,e.url)})},t.prototype.load=function(){var t=function(e,t){if(4===t.readyState&&t.responseText){var r="css-"+e;i[r]={url:e,data:t.responseText},this.parseCss(t.responseText,e)}return Promise.resolve()};return function(r){var n=this;return this.initialized.then(function(){if(null!==r[0]){var a=[];for(var o in r)a.push(e.Utils.promiseXHR("GET",r[o]).then(t.bind(n,r[o])));return Promise.all(a)}})}}(),t.prototype.getStyle=function(e,t){return a(s,e,t,0)},e.Class.CssManager=t,NIApi.register("styleSheet.reParse",function(e){t.prototype.reParseCss(e)}),NIApi.register("styleSheet.getObject",function(){var e={};return n(e,s),e})}(webpublicationNamespace);