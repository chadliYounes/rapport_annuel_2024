!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(n,i){!function(t,n){"object"==typeof r&&"undefined"!=typeof e?e.exports=n():"function"==typeof define&&define.amd?define(n):t.ES6Promise=n()}(this,function(){"use strict";function e(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function o(t){z=t}function a(t){J=t}function s(){return function(){return n.nextTick(f)}}function u(){return"undefined"!=typeof W?function(){W(f)}:h()}function c(){var t=0,e=new $(f),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function l(){var t=new MessageChannel;return t.port1.onmessage=f,function(){return t.port2.postMessage(0)}}function h(){var t=setTimeout;return function(){return t(f,1)}}function f(){for(var t=0;t<K;t+=2){var e=rt[t],r=rt[t+1];e(r),rt[t]=void 0,rt[t+1]=void 0}K=0}function p(){try{var e=t,r=e("vertx");return W=r.runOnLoop||r.runOnContext,u()}catch(n){return h()}}function d(t,e){var r=arguments,n=this,i=new this.constructor(g);void 0===i[it]&&I(i);var o=n._state;return o?!function(){var t=r[o-1];J(function(){return j(o,i,t,n._result)})}():O(n,i,t,e),i}function m(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(g);return _(r,t),r}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return ut.error=e,ut}}function M(t,e,r,n){try{t.call(e,r,n)}catch(i){return i}}function w(t,e,r){J(function(t){var n=!1,i=M(r,e,function(r){n||(n=!0,e!==r?_(t,r):x(t,r))},function(e){n||(n=!0,A(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,A(t,i))},t)}function P(t,e){e._state===at?x(t,e._result):e._state===st?A(t,e._result):O(e,void 0,function(e){return _(t,e)},function(e){return A(t,e)})}function E(t,e,n){e.constructor===t.constructor&&n===d&&e.constructor.resolve===m?P(t,e):n===ut?(A(t,ut.error),ut.error=null):void 0===n?x(t,e):r(n)?w(t,e,n):x(t,e)}function _(t,r){t===r?A(t,y()):e(r)?E(t,r,b(r)):x(t,r)}function S(t){t._onerror&&t._onerror(t._result),T(t)}function x(t,e){t._state===ot&&(t._result=e,t._state=at,0!==t._subscribers.length&&J(T,t))}function A(t,e){t._state===ot&&(t._state=st,t._result=e,J(S,t))}function O(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+at]=r,i[o+st]=n,0===o&&t._state&&J(T,t)}function T(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)n=e[a],i=e[a+r],n?j(r,n,i,o):i(o);t._subscribers.length=0}}function R(){this.error=null}function N(t,e){try{return t(e)}catch(r){return ct.error=r,ct}}function j(t,e,n,i){var o=r(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=N(n,i),a===ct?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void A(e,v())}else a=i,u=!0;e._state!==ot||(o&&u?_(e,a):c?A(e,s):t===at?x(e,a):t===st&&A(e,a))}function C(t,e){try{e(function(e){_(t,e)},function(e){A(t,e)})}catch(r){A(t,r)}}function L(){return lt++}function I(t){t[it]=lt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function F(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[it]||I(this.promise),X(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&x(this.promise,this._result))):A(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function k(t){return new F(this,t).promise}function G(t){var e=this;return new e(X(t)?function(r,n){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(r,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function H(t){var e=this,r=new e(g);return A(r,t),r}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(t){this[it]=L(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&q(),this instanceof D?C(this,t):B())}function Y(){var t=void 0;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(e){}if("[object Promise]"===n&&!r.cast)return}t.Promise=D}var V=void 0;V=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X=V,K=0,W=void 0,z=void 0,J=function(t,e){rt[K]=t,rt[K+1]=e,K+=2,2===K&&(z?z(f):nt())},Q="undefined"!=typeof window?window:void 0,Z=Q||{},$=Z.MutationObserver||Z.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3),nt=void 0;nt=tt?s():$?c():et?l():void 0===Q&&"function"==typeof t?p():h();var it=Math.random().toString(36).substring(16),ot=void 0,at=1,st=2,ut=new R,ct=new R,lt=0;return F.prototype._enumerate=function(t){for(var e=0;this._state===ot&&e<t.length;e++)this._eachEntry(t[e],e)},F.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===m){var i=b(t);if(i===d&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===D){var o=new r(g);E(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},F.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===ot&&(this._remaining--,t===st?A(n,r):this._result[e]=r),0===this._remaining&&x(n,this._result)},F.prototype._willSettleAt=function(t,e){var r=this;O(t,void 0,function(t){return r._settledAt(at,e,t)},function(t){return r._settledAt(st,e,t)})},D.all=k,D.race=G,D.resolve=m,D.reject=H,D._setScheduler=o,D._setAsap=a,D._asap=J,D.prototype={constructor:D,then:d,"catch":function(t){return this.then(null,t)}},D.polyfill=Y,D.Promise=D,D})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){g&&d&&(g=!1,d.length?m=d.concat(m):y=-1,m.length&&u())}function u(){if(!g){var t=o(s);g=!0;for(var e=m.length;e;){for(d=m,m=[];++y<e;)d&&d[y].run();y=-1,e=m.length}d=null,g=!1,a(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d,m=[],g=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];m.push(new c(t,e)),1!==m.length||g||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./modulesManager/ModulesManager"),i=function(){function t(){this.moduleManager=new n["default"],this.moduleManager.init()}return t}();r.Main=i},{"./modulesManager/ModulesManager":8}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../utils/ApiEvents"),i=function(){function t(){this.routersMatch=[],this.hashParams=[],this.hashChange=this.hashChange.bind(this),this.close=this.close.bind(this),window.addEventListener("hashchange",this.hashChange,!0),this.hashChange()}return t.prototype.hashChange=function(t){var e=window.location.hash.replace(/^\#/,"");this.hashParams=e.split("&"),this.checkUpdates()},t.prototype.checkUpdates=function(){for(var t=0,e=this.routersMatch.length;t<e;t++)this.routersMatch[t].checkUpdateAsync(this.hashParams)},t.prototype.close=function(t){this.routersMatch.filter(function(e){return e!==t})},t.prototype.goTo=function(t,e){var r=new RegExp(t,"g");e&&""!==e.trim()||(r=new RegExp("\\&"+t+"|"+t,"g"),e=""),window.location.hash=window.location.hash.replace(r,e)},t.prototype.match=function(t){var e=new o(this.close,t);return this.routersMatch.push(e),e.init(this.hashParams)},t}(),o=function(){function t(t,e){this.closeFromManager=t,this.toMatch=e,this.removableListeners=[],this.lastMatched=null,this._to=this._to.bind(this),this._update=this._update.bind(this),this._leave=this._leave.bind(this),this.close=this.close.bind(this),this.apiEvents=new n.ApiEvents}return t.prototype.init=function(t){return this.checkUpdateAsync(t),this.getToNLeave()},t.prototype.checkUpdateAsync=function(t){var e=this;setTimeout(function(){return e.checkUpdate(t)},0)},t.prototype.checkUpdate=function(t){var e=new RegExp(this.toMatch,"g"),r=null,n=null;if(t.forEach(function(t){var i=t.match(e);r=null===i?null:i[0],n=n||r}),null!==n||null!==this.lastMatched){if(null===n)return this.lastMatched=null,void this.apiEvents.fire({type:"leave",data:{}});if(n!==this.lastMatched){if(null===this.lastMatched)return this.lastMatched=n,void this.apiEvents.fire({type:"to",data:{}});this.lastMatched=n,this.apiEvents.fire({type:"update",data:{}})}}},t.prototype._to=function(t){var e=this;return this.apiEvents.addListener("to",t),this.removableListeners.push(function(){e.apiEvents.removeListener("to",t)}),this.getToNLeave()},t.prototype._update=function(t){var e=this;return this.apiEvents.addListener("update",t),this.removableListeners.push(function(){e.apiEvents.removeListener("to",t)}),this.getToNLeave()},t.prototype._leave=function(t){var e=this;return this.apiEvents.addListener("leave",t),this.removableListeners.push(function(){e.apiEvents.removeListener("to",t)}),this.getToNLeave()},t.prototype.close=function(){this.removableListeners.forEach(function(t){t()}),this.removableListeners=[],this.closeFromManager(this)},t.prototype.getToNLeave=function(){return{to:this._to,update:this._update,leave:this._leave,close:this.close}},t}();r["default"]=i},{"../utils/ApiEvents":10}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=t("./Main"),o=t("./Router/Router"),a=t("./playlistManager/PlaylistManager");!function(t){var e=function(){function t(){w.Class.SystemMain=i.Main,w.Class.PlaylistManager=a["default"];var t=new o["default"],e={};Object.defineProperty(e,"match",{value:t.match.bind(t),writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(e,"goTo",{value:t.goTo.bind(t),writable:!1,enumerable:!0,configurable:!1}),NIApi.register("common.Router",e)}return t}();t.SystemTs=e}(n||(n={})),new n.SystemTs},{"./Main":3,"./Router/Router":4,"./playlistManager/PlaylistManager":9}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t("es6-promise");var n=t("../utils/XHRPromise"),i=t("../utils/XHRPromise"),o=t("./ModuleInternal"),a=t("../utils/ModuleError"),s="js/index.js",u=function(){function t(t,e){this.dataModuleOrig=t,this.modules=e,this._executable=!1,this.dataModule={},this.moduleError=new a.ModuleError,this.setParamName(),this.setParamTextContent(),this.setParamVersion(),this.setParamEnable(),this.setParamParameters(),this.setParamPath(),this.moduleInternal=new o["default"](this.dataModule,this.modules)}return t.prototype.init=function(){var t=this;if(this.moduleError.thereIsErrors()===!0)return this.rejectModule();var e=new Promise(function(e,r){var o=new n["default"](i.Protocol.GET,t.dataModule.path);o.init().then(function(n){t.innerScript=n.responseText,t.safeExecute().then(function(){e()})["catch"](function(e){t.moduleError.thereIsErrors()===!0&&t.rejectModule(),r(e)})})["catch"](function(t){r(t)})});return e},t.prototype.getModuleName=function(){return this.dataModule.name},t.prototype.getNameSpace=function(){return this.moduleInternal.getNameSpace()},t.prototype.rejectModule=function(){return Promise.reject("Error")},t.prototype.safeExecute=function(){var t=this,e=this.moduleInternal.safeExecute(this.innerScript);return e.then(function(){})["catch"](function(e){t.moduleError.add(e,a.MESSAGESERRORS.moduleScriptError,t.dataModuleOrig)}),e},Object.defineProperty(t.prototype,"innerScript",{get:function(){return this._innerScript},set:function(t){try{t=t.trim()}catch(e){t="",this.moduleError.add("...",a.MESSAGESERRORS.moduleEmpty,this.dataModuleOrig)}this._innerScript=t},enumerable:!0,configurable:!0}),t.prototype.setParamName=function(){var t=this.dataModuleOrig.name;try{if(t=t.trim(),!!t==!1)throw"error";this.dataModule.name=t}catch(e){return void this.moduleError.add("...",a.MESSAGESERRORS.name,this.dataModuleOrig)}},t.prototype.setParamTextContent=function(){var t=this.dataModuleOrig.textContent||"";try{t=t.trim()}catch(e){}this.dataModule.textContent=t},t.prototype.setParamEnable=function(){var t=this.dataModuleOrig.enable;try{t=t.trim(),this.dataModule.enable="true"===t}catch(e){this.moduleError.add("...",a.MESSAGESERRORS.enable,this.dataModuleOrig)}},t.prototype.setParamVersion=function(){var t=this.dataModuleOrig.version;try{this.dataModule.version=t.trim()}catch(e){this.moduleError.add("...",a.MESSAGESERRORS.version,this.dataModuleOrig)}},t.prototype.setParamUserAgentFilter=function(){var t=this.dataModuleOrig.userAgentFilter;try{this.dataModule.userAgentFilter=t.trim()}catch(e){this.moduleError.add("...",a.MESSAGESERRORS.userAgentFilter,this.dataModuleOrig)}},t.prototype.setParamPath=function(){var t=this.dataModuleOrig.path;try{t=t.trim(),t.indexOf("/")!==t.length&&(t=t.concat("/")),this.dataModule.path=t.concat(s)}catch(e){this.moduleError.add("...",a.MESSAGESERRORS.path,this.dataModuleOrig)}},t.prototype.setParamParameters=function(){var t,e=this.dataModuleOrig.parameters;try{e=e.trim(),t=new Function("return "+e+"||{};")()}catch(r){return void this.moduleError.add(r,a.MESSAGESERRORS.parameters,this.dataModuleOrig)}if(t=t||{},this.dataModule.parameters={},t instanceof Object)for(var n in t)this.dataModule.parameters[n]=t[n];else;},t}();r["default"]=u},{"../utils/ModuleError":11,"../utils/XHRPromise":13,"./ModuleInternal":7,"es6-promise":1}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t("es6-promise");var n=t("../utils/ModuleError"),i=t("../utils/SplitPromise"),o=function(){function t(t,e){this.dataModule=t,this.modules=e,this._exports={},this.onReady=new i["default"],this.moduleError=new n.ModuleError,this.setNameSpace()}return t.prototype.safeExecute=function(t){this.innerScript=t;var e,r;e=this.getNameSpace();try{return r=new Function("nModule",this.innerScript).bind(e)(e),this.onReady.resolve(e),Promise.resolve()}catch(n){return this.onReady.reject(n),Promise.reject(n)}},t.prototype.getNameSpace=function(){return this.nameSpace},Object.defineProperty(t.prototype,"innerScript",{get:function(){return this._innerScript},set:function(t){this._innerScript=t},enumerable:!0,configurable:!0}),t.prototype.require=function(t){},Object.defineProperty(t.prototype,"exports",{get:function(){return this._exports},set:function(t){this._exports=t},enumerable:!0,configurable:!0}),t.prototype.moduleEvent=function(t,e){var r=this.modules[t];if(!r){var n=[];for(var i in this.modules)n.push(i);return Promise.reject('The module "'+t+'" not exist with this name, the current exists modules are : '+n.join(", "))}switch(e){case"ready":return r.onReady()}return r.onReady()},t.prototype.setNameSpace=function(){var t=this,e=this;this.nameSpace={},Object.defineProperty(this.nameSpace,"webpublicationNamespace",{enumerable:!0,configurable:!1,writable:!1,value:webpublicationNamespace||w}),Object.defineProperty(this.nameSpace,"data",{enumerable:!0,configurable:!1,writable:!1,value:this.dataModule}),Object.defineProperty(this.nameSpace,"exports",{enumerable:!0,configurable:!1,get:function(){return e.exports},set:function(t){e.exports=t}}),Object.defineProperty(this.nameSpace,"modules",{enumerable:!0,configurable:!1,writable:!1,value:this.modules}),Object.defineProperty(this.nameSpace,"require",{enumerable:!0,configurable:!1,writable:!1,value:this.require}),Object.defineProperty(this.nameSpace,"onReady",{enumerable:!0,configurable:!1,writable:!1,value:function(){return t.onReady}}),Object.defineProperty(this.nameSpace,"on",{enumerable:!0,configurable:!1,writable:!1,value:function(e,r){return t.moduleEvent(e,r)}})},t}();r["default"]=o},{"../utils/ModuleError":11,"../utils/SplitPromise":12,"es6-promise":1}],8:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&r[0]?o["return"]:r[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,o=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(n){r=[6,n],o=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0}),t("es6-promise");var o=t("./Module"),a=t("../utils/SplitPromise"),s=function(){function t(){this.modules={},this.modulesPrivate={},this.modulesReady={},this.modulesArray=[]}return t.prototype.init=function(){var t=this;this.dataModules=w.Main.xmlManager.get("common-ui","modules");var e=new Promise(function(e,r){t.resolveModules(t.dataModules).then(function(){t.loadModules().then(function(){return e()})["catch"](function(){console.warn("Something wrong with modules!"),r("Something wrong with modules!")})})});return e},Object.defineProperty(t.prototype,"userAgent",{get:function(){return w.Param.userAgent},enumerable:!0,configurable:!0}),t.prototype.resolveValues=function(t){for(var e in t){var r=e;t[r]=w.Utils.resolveVariable(t[r])}return Promise.resolve()},t.prototype.resolveModules=function(t){var e=[];for(var r in t)e.push(this.resolveValues(t[r]));return Promise.all(e)},t.prototype.getParamName=function(t){var e=t.name;return"string"!=typeof e?null:(e=e.trim(),!!e==!1?null:e)},t.prototype.checkUserAgentFilter=function(t){var e=new RegExp(t,"gim"),r=this.userAgent.device.type.match(e);if(null===r){var n=window.location.search;r=n.match(e)}return null===r&&(r=navigator.userAgent.match(e)),r},t.prototype.loadModules=function(){return n(this,void 0,void 0,function(){var t,e,r,n,o,s,u,c,o,s;return i(this,function(i){switch(i.label){case 0:for(t=[],r=this.dataModules.slice(0),o=0,s=this.dataModules.length;o<s;o++)if(n=r[o],u=this.checkUserAgentFilter(n.userAgentFilter),c=this.getParamName(n),null!==u&&"false"!==n.enable){if(null===c||void 0!==this.modulesReady[c])throw'\nyou can use a multiple modules with same name: "'+c+'"\t\t\t\t\nonly if the filters gives different result.\t\t\t\t\nOr : you can not enable module with name "'+c+'",\t\t\t\t\nthere is another module with the same name which is enabled yet!.';this.modulesReady[c]=new a["default"],e=this.preSetModule(n),t.push(e)}o=0,s=this.modulesArray.length,i.label=1;case 1:return o<s?(n=r[o],e=this.loadModule(this.modulesArray[o]),"false"!==n.asynchronous?[3,3]:[4,e]):[3,5];case 2:i.sent(),i.label=3;case 3:t.push(e),i.label=4;case 4:return o++,[3,1];case 5:return[2,Promise.all(t)]}})})},t.prototype.preSetModule=function(t){var e=this,r=new Promise(function(r,n){var i=new o["default"](t,e.modules),a=i.getModuleName();e.modules[a]=i.getNameSpace(),e.modulesArray.push(i),e.modulesPrivate[a]=i,r()});return r},t.prototype.loadModule=function(t){var e=this,r=t.init();return r.then(function(){e.modulesReady[t.getModuleName()].resolve(t.getNameSpace())})["catch"](function(r){e.modulesReady[t.getModuleName()].reject(r)}),r},t}();r["default"]=s},{"../utils/SplitPromise":12,"./Module":6,"es6-promise":1}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n;!function(t){t.PAGE="dpp",t.TAB_CHAPTER="dpt",t.SUMMARY_CHAPTER="dps"}(n||(n={}));var i=function(){function t(t,e){this.parent=t,this.viewMain=e,this.isEnabled=!1,this.pageIndexes=[];var r=w.Main.xmlManager.get("common-ui","configs","dynamicPlaylist").enabled,i=new URLSearchParams(window.location.search),o=i.has(n.PAGE)||i.has(n.TAB_CHAPTER)||i.has(n.SUMMARY_CHAPTER);this.isEnabled=r&&o,this.isEnabled&&(this.pageIndexes=this.getPageIndexesFromUrl(i))}return Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pageIndexes.length},enumerable:!0,configurable:!0}),t.prototype.getPageIndexes=function(){return this.pageIndexes},t.prototype.getOriginalPageIndex=function(t){return this.pageIndexes[t]},t.prototype.getOriginalPageNumber=function(t){return this.pageIndexes[t-1]+1},t.prototype.getPlaylistedPageNumber=function(t){return this.pageIndexes.indexOf(t-1)+1},t.prototype.getInitialPageCount=function(){return w.Main.xmlManager.get("common-configuration","config","pageCount")},t.prototype.getPageIndexesFromUrl=function(t){return this.getPageNumbersFromUrl(t).map(function(t){return t-1})},t.prototype.getPageNumbersFromUrl=function(t){var e=t.get(n.PAGE);if(e)return this.getPageNumbersFromPageParam(e);var r=t.get(n.TAB_CHAPTER);if(r)return this.getPageNumbersFromTabChaptersParam(r);var i=t.get(n.SUMMARY_CHAPTER);return i?this.getPageNumbersFromSummaryChaptersParam(i):[]},t.prototype.getPageNumbersFromPageParam=function(t){var e=this.getInitialPageCount();return t.split(",").map(Number).filter(function(t){return t>=1&&t<=e})},t.prototype.getPageNumbersFromTabChaptersParam=function(t){var e=this,r=w.Main.xmlManager.get("common-ui","configs","chapters"),n=t.split(","),i=[];return n.forEach(function(t){i.push.apply(i,e.getPageNumbersByTabChapterId(r,t))}),i},t.prototype.getPageNumbersByTabChapterId=function(t,e){try{var r=[],n=t.findIndex(function(t){return t.id===e}),i=t[n];if(!i)throw"Dynamic Playlist Error: Chapter not found in Tab config";var o=i.page;if(!o)throw"Dynamic Playlist Error: missing page attribute in Tab config";for(var a=this.getTabChapterLastPage(t,n),s=Number(o);s<=a;s++)r.push(s);return r}catch(u){return[]}},t.prototype.getTabChapterLastPage=function(t,e){var r=this.getNextTabChapter(t,e);if(!r)return this.getInitialPageCount();var n=r.page,i=t[e].page;return i===n?Number(i):Number(n)-1},t.prototype.getNextTabChapter=function(t,e){for(var r=e+1;r<t.length;r++)if("tab"===t[r].type)return t[r];return null},t.prototype.getPageNumbersFromSummaryChaptersParam=function(t){var e=this,r=w.Main.xmlManager.get("summary","xml"),n=t.split(","),i=[];return n.forEach(function(t){i.push.apply(i,e.getPageNumbersBySummaryChapterId(r,t))}),i},t.prototype.getPageNumbersBySummaryChapterId=function(t,e){try{var r=[],n=t.querySelector('it[id="'+e+'"]');if(!n)throw"Dynamic Playlist Error: Chapter not found in summary config";var i=n.getAttribute("p");if(!i)throw"Dynamic Playlist Error: missing p (page) attribute in summary config";for(var o=this.getSummaryChapterLastPage(n),a=Number(i);a<=o;a++)r.push(a);return r}catch(s){return[]}},t.prototype.getSummaryChapterLastPage=function(t){var e=this.getNextSummaryChapter(t);if(!e)return this.getInitialPageCount();var r=e.getAttribute("p"),n=t.getAttribute("p");return n===r?n:r-1},t.prototype.getNextSummaryChapter=function(t){var e=t.nextElementSibling;return e?"COMMENT"===e.getAttribute("t")?this.getNextSummaryChapter(e):e:t.parentNode?this.getNextSummaryChapter(t.parentNode):null},t}();r["default"]=i},{}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){this.listeners={},this.iName="ApiEvent"}return t.prototype.addListener=function(t,e){"undefined"==typeof this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].indexOf(e)===-1&&this.listeners[t].push(e)},t.prototype.fire=function(t){var e,r,n=0,i=0;if(t.target||(t.target=this),t.context||(t.context=this),this.listeners[t.type]instanceof Array){e=this.listeners[t.type],r=[];var o=void 0;for(i=e.length;n<i;n++)r.push(e[n]);for(;o=r.shift();)e.indexOf(o)!==-1&&o(t)}},t.prototype.removeListener=function(t,e){var r,n=0,i=0;if(this.listeners[t]instanceof Array)for(r=this.listeners[t],n=r.length;i<n;i++){if(null!==e&&r[i]===e){r.splice(i,1);break}null===e&&r.splice(i,1)}},t}();r.ApiEvents=n},{}],11:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={name:"module error =>  'name' attribute !,",enable:"module error =>  'enable' attribute !,",parameters:"module error =>  'parameters' attribute !,",path:"module error =>  'path' attribute !,",version:"module error =>  'version' attribute !,",userAgentFilter:"module error =>  'version' attribute !,",moduleEmpty:"module is empty !,",moduleScriptError:"Script error in module !,"};r.MESSAGESERRORS=n;var i=function(){function t(){this._errorStatus=!1,this.errorReasons=[]}return t.prototype.add=function(t,e,r){this.errorStatus=!0,this.errorReasons.push([e,t]),console.warn(r,t)},t.prototype.getMessages=function(){var t="";return this.errorReasons.forEach(function(e){t=t.concat(e.join("\n and \n"))}),t},t.prototype.thereIsErrors=function(){return this.errorStatus},Object.defineProperty(t.prototype,"errorStatus",{get:function(){return this._errorStatus},set:function(t){this._errorStatus=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorReasons",{get:function(){return this._errorReasons},set:function(t){this._errorReasons=t},enumerable:!0,configurable:!0}),t}();r.ModuleError=i},{}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t("es6-promise");var n=function(){function t(){var t=this;this.promise=new Promise(function(e,r){t.resolve=e,t.reject=r});var e=this.promise;this.then=e.then.bind(e),this["catch"]=e["catch"].bind(e)}return t}();r["default"]=n},{"es6-promise":1}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){}return t.GET="GET",t.get="GET",t.POST="POST",t.post="POST",t}();r.Protocol=n;var i=function(){function t(t,e,r){void 0===t&&(t=n.GET),void 0===e&&(e=""),void 0===r&&(r=null),this.protocol=t,this.url=e,this.data=r,this.xhr=new XMLHttpRequest}return t.prototype.onreadystatechange=function(){if(4===this.xhr.readyState)return 404===this.xhr.status?void this.reject(this):void this.resolve(this.xhr)},t.prototype.executeur=function(t,e){this.resolve=t,this.reject=e,this.xhr.open(this.protocol,this.url,!0),this.xhr.onreadystatechange=this.onreadystatechange.bind(this),this.xhr.send(this.data)},t.prototype.init=function(){return new Promise(this.executeur.bind(this))},t}();r["default"]=i},{}]},{},[5]);